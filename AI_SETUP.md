# AI機能セットアップガイド

## 概要

習慣デザイン・ラボでは、振り返り時にAIによるアドバイス機能を利用できます。
この機能はOpenAI APIを使用しており、習慣形成の専門家としてあなたの振り返りを分析し、実践的なアドバイスを提供します。

## セットアップ手順

### 1. OpenAI APIキーの取得

1. [OpenAI Platform](https://platform.openai.com/) にアクセス
2. アカウントを作成またはログイン
3. [API Keys](https://platform.openai.com/api-keys) ページに移動
4. 「Create new secret key」をクリック
5. APIキーをコピー（`sk-` で始まる文字列）

### 2. APIキーの設定方法

#### 方法1: アプリ内で設定（推奨）

1. ダッシュボード右上の設定アイコン（歯車）をクリック
2. 「AI設定」を選択
3. APIキーを入力して「保存」をクリック

#### 方法2: 環境変数で設定

`.env` ファイルに以下を追加：

```bash
VITE_OPENAI_API_KEY=sk-your-api-key-here
```

## AI機能の使い方

### 振り返りページでのAIアドバイス

1. プロジェクトの振り返りページで振り返り内容を入力
2. 「AIアドバイスを生成」ボタンをクリック
3. AIが以下の観点から分析を提供：
   - **うまくいっている点**: 継続すべき良い習慣
   - **改善のヒント**: より効果的にするための提案
   - **次に試すこと**: 具体的なアクションプラン
   - **励ましのメッセージ**: モチベーション維持のための言葉

### AIアドバイスの特徴

- BJ Foggの行動モデル（B=MAP）に基づいた分析
- あなたの振り返り内容に合わせたパーソナライズされたアドバイス
- 実践的で具体的なアクションの提案
- ポジティブで励みになるフィードバック

## セキュリティに関する注意事項

### 現在の実装（開発版）

- APIキーはブラウザのローカルストレージに保存されます
- 暗号化されていないため、共有PCでの使用は推奨しません

### 本番環境での推奨事項

1. **サーバーサイドでのAPI呼び出し**
   - APIキーをクライアントに公開しない
   - バックエンドサーバーを経由してOpenAI APIを呼び出す

2. **レート制限の実装**
   - ユーザーごとのAPI使用量を制限
   - 不正使用を防ぐ

3. **APIキーの暗号化**
   - 保存時に暗号化を実施
   - 環境変数での管理を推奨

## トラブルシューティング

### APIキーが無効と表示される

- APIキーが正しくコピーされているか確認（`sk-` で始まる）
- OpenAIアカウントに利用可能なクレジットがあるか確認

### AI分析が失敗する

- インターネット接続を確認
- APIキーが正しく設定されているか確認
- OpenAI APIのステータスを確認: https://status.openai.com/

### 分析結果が期待と異なる

- より具体的に振り返り内容を記入してみる
- 各項目（うまくいった点、難しかった点、次に試したいこと）をバランスよく記入

## 料金について

- OpenAI APIの使用には料金が発生します
- 1回の分析につき約$0.01-0.02程度（GPT-4使用時）
- 詳細は[OpenAI Pricing](https://openai.com/pricing)を確認

## 今後の機能拡張予定

- [ ] 過去の振り返り履歴を考慮した長期的なアドバイス
- [ ] 習慣要素の自動最適化提案
- [ ] 音声での振り返り入力対応
- [ ] 複数のAIモデルの選択オプション